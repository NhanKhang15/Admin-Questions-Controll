:root{
  --bg: #fff;
  --surface: #f8fafc;
  --muted: #6b7280;
  --muted-2: #9ca3af;
  --border: #e5e7eb;
  --accent: #111;
  --text: #111827;
  --strong: #374151;
  --ink: #475569;
  --success-bg: #eef2ff;
  --success-fg: #1d4ed8;
  --danger-50: #fee2e2;
  --danger-100: #fff5f5;
  --shadow: rgba(0,0,0,.06);
  --radius-sm: 6px;
  --radius: 10px;
  --radius-lg: 14px;
}

/* Layout wrapper */
.aq-wrap{
  background:var(--bg);
  border:1px solid var(--border);
  border-radius:var(--radius-lg);
  padding:16px;
}

/* Toolbar / tabs */
.aq-toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;margin-bottom:12px}
.aq-tabs{display:flex;gap:8px;flex-wrap:wrap}
.aq-tab{display:inline-block;padding:8px 12px;border:1px solid var(--border);border-radius:var(--radius);background:var(--bg);text-decoration:none;color:var(--accent)}
.aq-tab.is-active{background:var(--accent);color:var(--bg);border-color:var(--accent)}
.aq-note{font-size:13px;color:var(--muted)}

.aq-empty{padding:16px;color:var(--muted-2)}

/* Table */
.aq-table-wrap{width:100%;overflow:auto}
.aq-table{width:100%;border-collapse:collapse}
.aq-table thead th{
  background:var(--surface);
  border:1px solid var(--border);
  padding:12px;
  text-align:left;
  font-weight:700;
  color:var(--strong);
}
.aq-table td{border:1px solid var(--border);padding:12px}
.aq-table tr.is-hidden{opacity:.6}

.aq-stt{text-align:center;font-weight:600;color:var(--ink)}
.aq-set{white-space:nowrap}
.aq-text{word-break:break-word}
.aq-type{text-transform:uppercase;font-size:12px;color:var(--muted)}

/* Actions / icons */
.qs-actions{display:flex;align-items:center;justify-content:center;gap:12px;min-width:180px;box-sizing:border-box;padding:6px}
.qs-inline{display:inline-flex;align-items:center;gap:6px}
.qs-icon{
  width:28px;height:28px;display:inline-grid;place-items:center;border-radius:8px;border:1px solid var(--border);background:var(--bg);cursor:pointer;padding:0;transition:transform .12s ease,box-shadow .12s ease;box-sizing:border-box;overflow:hidden;line-height:0;min-width:36px;min-height:36px;vertical-align:middle
}
.qs-icon:hover{transform:translateY(-1px);box-shadow:0 2px 8px var(--shadow)}
.qs-icon.is-disabled{opacity:.7;pointer-events:none;cursor:not-allowed;filter:grayscale(1)}
.qs-icon-img{width:16px;height:16px;object-fit:contain}
.qs-actions .btn-delete{border-color:var(--danger-50)}
.qs-actions .btn-delete:hover{background:var(--danger-100);border-color:#fecaca}

/* Points inline editor */
.aq-points-edit{display:flex;align-items:center;gap:6px;justify-content:flex-end}
.aq-points-edit input.aq-point-inline{width:72px;box-sizing:border-box;padding:6px;border-radius:var(--radius-sm);border:1px solid var(--border)}
.aq-points-edit .btn-save-inline{padding:6px}

/* Set header / badge / divider */
.aq-set-header{
  display:block; /* avoid flex wrapping */
  width:100%;
  padding:10px 12px;
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--radius);
  font-weight:600;
  color:var(--text);
}
.aq-set-header__left{display:block}
.aq-set-header__right{display:none !important}

.aq-set-badge{
  display:inline-block;
  white-space:nowrap;
  font-size:13px;
  line-height:1;
  padding:6px 12px;
  border-radius:999px;
  border:1px solid var(--border);
  background:var(--success-bg);
  color:var(--success-fg);
  font-weight:600;
}

.aq-pts-left{color:var(--ink);font-size:14px}

.aq-set-divider{padding:0;border:none}
.aq-set-divider::before{content:"";display:block;height:1px;width:100%;background:linear-gradient(90deg,transparent,var(--border),transparent)}
.aq-set-divider .aq-set-chip{display:none;position:relative;top:-10px;padding:0 10px;background:var(--bg);color:var(--muted);font-size:12px}

/* Add button */
.aq-add-btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border);background:var(--bg);border-radius:var(--radius);padding:6px 10px;cursor:pointer}
.aq-add-btn:hover{background:#f6f7f9}

/* Add panel */
.aq-addpanel{background:var(--bg);border:1px dashed #d1d5db;border-radius:12px;padding:12px}
.aq-addpanel__form{display:grid;grid-template-columns:repeat(4,minmax(120px,1fr)) auto;gap:10px;align-items:center}
.aq-addpanel__actions{display:flex;gap:10px;align-items:center}

/* ensure colspan cells with header don't collapse */
.aq-table td[colspan] .aq-set-header{width:100%}

/* Responsive tweaks */
@media (max-width: 768px){
  .aq-addpanel__form{grid-template-columns:1fr}
  .aq-set-header{align-items:flex-start}
}

@media (max-width:720px){
  .aq-set{white-space:normal}
  /* Allow long 3rd column to wrap — keep selector identical to original intent */
  .aq-table thead th:nth-child(3),
  .aq-table td:nth-child(3){max-width:0}
}

.qs-icon.btn-skip.active:has(img[src*="nonskip.png"]) { position: relative }
.qs-icon.btn-skip.active:has(img[src*="nonskip.png"])::after{
  content:"✕";
  position:absolute;
  top:2px;right:2px;
  width:14px;height:14px;
  border-radius:50%;
  background:#ef4444; /* red */
  color:#fff;
  font-size:10px;line-height:14px;text-align:center;
  box-shadow:0 0 0 1px #fff; /* small outline to separate from icon */
}